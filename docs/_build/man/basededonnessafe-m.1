.\" Man page generated from reStructuredText.
.
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.TH "BASEDEDONNESSAFE-M" "1" "juin 18, 2025" "" "Base de données SAFE-M"
.SH NAME
basededonnessafe-m \- Base de données SAFE-M 1.0
.sp
Ce programme permet d’intéragir avec la base de données sur l’eau à Madagaser de l’association
SAFE\-M de manière la plus intuitive possible au travers du remplissage et de la modification de fichiers
LibreOffice générés automatiquement.
.SH DÉTAILS ET STRUCTURE DE LA BASE DE DONNÉES SAFEM_DATA
.sp
La base de données sur l’eau à Madagascar \fBSAFEM_DATA\fP contient 5 \fBTABLES\fP de données:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
MariaDB [SAFEM_DATA]> show tables;

+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+
| Tables_in_SAFEM_DATA |
+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+
| Members              |
| courses              |
| localisation         |
| measurements         |
| science              |
+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+
.EE
.UNINDENT
.UNINDENT
.sp
Le \fBTABLE\fP \fBMembers\fP regroupe des informations sur les collaborateurs de SAFE\-M.
.sp
Le \fBTABLE\fP \fBcourses\fP contient plusieurs cours d’hydrologie ou de programmation de niveau Licence 3 et Master.
.sp
Le \fBTABLE\fP \fBscience\fP possède plusieurs références bibliographiques.
.sp
Les deux derniers \fBTABLES\fP vont être décris plus en détails car le programme documenté ici permet d’intéragir facilement aver la base de données
de manière interactive via ces deux \fBTABLES\fP\&.
.SS measurements
.sp
ce \fBTABLE\fP possède 7 colonnes de données
.INDENT 0.0
.INDENT 3.5
.sp
.EX
MariaDB [SAFEM_DATA]> select * from measurements;

+\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+
| rec  | loc_code | mdate               | mtype                  | mvalue  | munit     | comment                             |
+\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+
|  157 | A001     | 2022\-03\-14 00:00:00 | Profondeur puits       |      15 | m         | date approx                         |
.EE
.UNINDENT
.UNINDENT
.sp
\fBrec\fP, doit être un nombre entier, est un numéro d’enregistrement automatiquement attribué par la base de donnée lorsque un nouvel enregistrement est fournit.
.sp
\fBloc_code\fP, doit être une chaine de caractères, est un code qui fait office de nomenclature, ce code consensuel, unique et propre à chaque puit, source ou rivière est attribué par les utilisateurs
lors de l’enregistrement d’une nouvelle localisation. Cela permet de cataloguer, d’identifier clairement et de retrouver de manière simple un point d’enregistrement.
Chaque mesure physico\-chimique d’échantillon d’eau (par exemple) ou mesure piezométrique est donc associé au puit d’où provient l’échantillon par ce code.
.sp
\fBmdate\fP, au format \fBYYYY\-MM\-DD 00:00:00\fP, va contenir la date à laquelle à été prise la mesure, les six derniers chiffres correspondent aux heures, minutes et secondes.
.sp
\fBmtype\fP, doit être une chaine de caractères, va correspondre au type de mesure effectuée, le plus souvent cela peut\-être \fBpH\fP, \fBOrp\fP, \fBOd\fP, \fBConductivité\fP ou \fBmesure piézométrique\fP\&.
.sp
\fBmvalue\fP, doit être un nombre entier ou à virgule, contient la valeur mesurée.
.sp
\fBmunit\fP, doit être une chaine de caractères, contient les unités de la mesures.
.sp
\fBcomment\fP, doit être une chaine de caractère, permet de rajouter quelques commentaires sur la prise de mesures et d’eventuelles informations, par exemple la hauteur de
la margelle du puit pour une mesure piezométrique.
.SS Saisie sur document LibreOffice
.sp
Lors de la saisie de données de mesure sur les documents \fBLibreOffice\fP qui vont permettre d’intéragir avec la base de données assurez\-vous que les champs que vous remplissez
respecte bien le format attendu et décrit plus haut.
.sp
Tout les champs peuvent ne pas être remplis en cas de manque de données et d’informations néanmoins certains sont obligatoires
pour assurer la validité de l’enregistrement et sont ajout à la base de données. Dans le cas du \fBTABLES\fP \fBmeasurements\fP  seul le champs \fBloc_code\fP est obligatoire.
.sp
Lors de la saisie de données sur \fBLibreOffice\fP vous remarquerez que le champs \fBrec\fP n’apparait pas, cette information va être automatiquement ajoutée lors de l’ajout à la database, l’utiliateur n’a pas à s’en
préoccuper.
.SS localisation
.sp
Ce \fBTABLE\fP possède 16 colonnes de données:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
MariaDB [SAFEM_DATA]> select * from localisation;

+\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-+
| rec_code | loc_type                           | name                                | latitude | longitude | altitude | description                    | contact               | coord_sys            | gps_used                           | exploitation         | loc_date            | referentiel_z    | photos_list     | quartier                           | loc_code |
+\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-+\-\-\-\-\-\-\-\-\-\-+
|        1 | puits                              | NULL                                | \-18.9103 |   47.5559 |     1289 | sec                            |                       | WGS84                | NULL                               | NULL                 | NULL                | NULL             | NULL            | NULL                               | A001     |
|        2 | puits privé traditionnel           | NULL                                | \-18.9104 |   47.5573 |     1282 |                                |                       | WGS84                | NULL                               | NULL                 | NULL                | NULL             | NULL            | NULL                               | A002     |
|        3 | forage du campus                   | NULL                                | \-18.9115 |   47.5581 |     1263 |                                |                       | WGS84                | NULL                               | NULL                 | NULL                | NULL             | NULL            | NULL                               | A003     |
|        4 | forage privé                       | NULL                                | \-18.9114 |   47.5581 |     1271 |                                |                       | WGS84                | NULL                               | NULL                 | NULL                | NULL             | NULL            | NULL                               | A004     |
|        5 | forage piblic                      | NULL                                | \-18.9097 |   47.5575 |     1271 | fermé et non fonctionnel       |                       | WGS84                | NULL                               | NULL                 | NULL                | NULL             | NULL            | NULL                               | A005     |
.EE
.UNINDENT
.UNINDENT
.sp
\fBrec_code\fP, doit être un nombre entier, est un numéro d’enregistrement automatiquement attribué par la base de donnée lorsque un nouvel enregistrement est fournit.
.sp
\fBloc_type\fP, doit être une chaine de caractères, pour indiquer qu’est ce qui a été localisé lors de l’enregistrement, une puit, une source, un forage.
.sp
\fBname\fP, doit être une chaine de caractères, permet d’indiquer le nom de le/la propriétaire du puit par exemple.
.sp
\fBlatitude\fP, \fBlongitude\fP, \fBaltitude\fP, doivent être des nombres à virgule et sont obtenues par mesure GPS RTK.
.sp
\fBdescription\fP, doit être une chaine de caractère, permet de completer avec des informations supplémentaires.
.sp
\fBcontact\fP, doit être une chaine de caractère, permet de renseigner si le/la propriétaire possède un moyen de contact, email, téléphone ou autre.
.sp
\fBcoord_sys\fP, doit être une chaine de caractère, par défaut si rien n’est renseigné ce sera WGS84,  il s’agit d’un système de coordonnées géographiques mondial.
.sp
\fBgps_used\fP, doit être une chaine de caractère, permet de renseigner le modèle du GPS utilisé.
.sp
\fBexploitation\fP, doit être une chaine de caractère, permet de renseigner la type d’utilisation du puit si c’est pour un usage domestique par exemple, ou s’il n’est
plus exploité et depuis combien de temps.
.sp
\fBloc_date\fP, au format \fBYYYY\-MM\-DD 00:00:00\fP, contient la date à laquelle à été prise la mesure de localisation.
.sp
\fBreferentiel_z\fP, doit être une chaine de caractère, permet d’indiquer d’où la mesure d’altitude est prise, s’il s’agit de la tête du puit, de la base de la margelle, etc.
.sp
\fBphotos_list\fP, doit être du texte, par exemple : IMG_20221028_091535, permet d’ajouter la référence de photo du puits qui vont être enregistrés dans un dossier extérieur mais
qu’il sera facile de retrouver grâce à cette référence.
.sp
\fBquartier\fP, doit être une chaine de caractère, permet de renseigner le quartier dans lequel se situe la localisation.
.sp
\fBloc_code\fP, doit être une chaine de caractère, il s’agit du code qui fait office de nomenclature, ce code consensuel, unique et propre à chaque puit, source ou rivière est attribué par les utilisateurs
lors de l’enregistrement d’une nouvelle localisation. Cela permet de cataloguer, d’identifier clairement et de retrouver de manière simple un point d’enregistrement.
.SS Saisie sur document LibreOffice
.sp
Lors de la saisie de données de localisation sur les documents \fBLibreOffice\fP qui vont permettre d’intéragir avec la base de données assurez\-vous que les champs que vous remplissez
respecte bien le format attendu et décrit plus haut.
.sp
Tout les champs peuvent ne pas être remplis en cas de manque de données et d’informations néanmoins certains sont obligatoires
pour assurer la validité de l’enregistrement et l’ajouter à la base de données. Les champs obligatoires dans le cas du \fBTABLES\fP \fBlocalisation\fP sont : \fBloc_type\fP, \fBlatitude\fP, \fBlongitude\fP et \fBloc_code\fP\&.
.sp
Lors de la saisie de données sur LibreOffice vous remarquerez que le champs \fBrec_code\fP n’apparait pas, cette information va être automatiquement ajoutée lors de l’ajout à la database, l’utiliateur n’a pas à s’en
préoccuper.
.SH INSTALLATION
.SS Charger le répertoire
.sp
Afin d’utiliser le programme vous avez besoin de charger le répertoire dans lequel il se trouve. Ce répertoire
contient l’ensemble des codes et dossiers nécessaires à la bonne gestion de la base de donnée.
.sp
Vous pouvez cloner le répertoire en saisissant directement dans le terminal la commande:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
# git clone ...
.EE
.UNINDENT
.UNINDENT
.sp
\fBNOTE:\fP
.INDENT 0.0
.INDENT 3.5
Attention, avant d’importer le programme vérifiez bien que vous vous situez dans votre répertoire de travail.
.UNINDENT
.UNINDENT
.sp
Le répertoire nouvellement chargé contient :
.SS Installation de la base de données
.SS Démarrage du programme
.sp
Essayons de lancer le programme pour voir comment celui\-ci fonctionne. Saisissez simplement dans votre terminal:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
# A l\(aqintérieur du dossier
python3 \(aqopen_sql.py\(aq
.EE
.UNINDENT
.UNINDENT
.sp
La programme devrait se lancer avec un message de confirmation de connexion à la base de données ainsi qu’avec l’affichage
du \fBMENU PRINCIPAL\fP:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
You\(aqre connected to dtabase:  (\(aqSAFEM_DATA\(aq,)

===========================================================================
MENU PRINCIPAL
===========================================================================
Que souhaitez\-vous faire ?
1 \- Ajouter de nouvelles données
2 \- Ajouter à partir d\(aqun fichier déjà remplit
3 \- Visualiser/Modifier d\(aqanciennes données
4 \- Quitter
===========================================================================
?
.EE
.UNINDENT
.UNINDENT
.sp
Plusieurs choix s’offrent alors à vous :
.sp
\fI\%Ajouter des enregistrements\fP
.sp
\fI\%Visualiser et modifier des enregistrements\fP
.sp
\fBAVERTISSEMENT:\fP
.INDENT 0.0
.INDENT 3.5
Si le programme ne parvient pas à ce connecter à la base de données le message d’erreur suivant apparaitra:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
Error while connecting to MySQL
.EE
.UNINDENT
.UNINDENT
.sp
Vérifiez alors si les paramètres de connection dans la fonction \fBconnect_database()\fP sont corrects.
.UNINDENT
.UNINDENT
.SH AJOUTER DES ENREGISTREMENTS
.SS Saisie des données
.sp
Il est possible de saisir de nouveaux enregistrements dans la base de données. Dans l’interface \fBMENU PRINCIPAL\fP choisissez l’option
\fB1 \- Ajouter de nouvelles données\fP, appuyez sur la touche \fB1\fP et validez avec la touche \fBEntrée\fP\&.
.sp
Le programme vous demandera alors quel est le type de données que vous souhaitez ajouter. Cela determinera dans quel \fBTABLE\fP de la base
de données les enregistrements vont être sauvegarder. Pour sélectionner l’option désirée saisissez le chiffre correspondant et valider avec la touche
\fBEntrée\fP\&.
.sp
Le programme va vous afficher un message de création du fichier LibreOffice dans lequel vous allez devoir renseigner vos données. Directement après reception
de ce message ce fichier LibreOffice Calc s’ouvre:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
You\(aqre connected to dtabase:  (\(aqSAFEM_DATA\(aq,)

===========================================================================
MENU PRINCIPAL
===========================================================================
Que souhaitez\-vous faire ?
1 \- Ajouter de nouvelles données
2 \- Ajouter à partir d\(aqun fichier déjà remplit
3 \- Visualiser/Modifier d\(aqanciennes données
4 \- Quitter
===========================================================================
?

\-> 1

    ===========================================================================
    MENU CHOIX DES DONNEES
    ===========================================================================
    Quelles données voulez\-vous ajouter :
    1 \- Localisation de puits/sources/rivières ?
    2 \- Mesures physico\-chimiques/piézométriques ?
    3 \- Quitter le menu choix des données et retourner au menu principal
    ===========================================================================

\-> 2

Fichier ODS \(aqtemplate_measurements.ods\(aq créé avec succès.
Une fois le fichier LibreOffice enregistré, Appuyez sur Entrée
.EE
.UNINDENT
.UNINDENT
[image]
.sp
Ces fichiers LibreOffice \fBtemplate_measurements.ods\fP et \fBtemplate_localisation.ods\fP, respectivement si vous souhaitez ajouter des données
de mesures physico\-chimique/piezométrique ou de localisation de puits, possède des entêtes de colonnes pré\-remplies. Il vous suffit donc simplement
de saisir les informations dans la colonne correspondante. Si vous ne possédez pas certaines informations non essentielle, aucun problème. Chaque
ligne remplie correspond à un enregistrement. Une fois toutes les données saisis enregistré le fichier avec \fBCTRL + S\fP puis fermez le. Vous
pouvez maintenant revenir au programme et appuyez sur \fBEntrée\fP pour ajouter ces nouvelles données dans la database:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
Database mis à jour
.EE
.UNINDENT
.UNINDENT
.sp
La base de données SAFEM_DATA est mise à jour et contient désormais vous nouveaux enregistrements dans les TABLES localisation ou measurements suivant le type de données ajouté.
Vous retombez ensuite sur le menu \fBCHOIX DES DONNEES\fP que vous pouvez quitter avec l’option \fB3 \- Quitter le menu choix des données et retourner au menu principal\fP
si vous n’avez plus aucun enregistrement à sauvegarder.
.sp
\fBAVERTISSEMENT:\fP
.INDENT 0.0
.INDENT 3.5
Attention lors de la saisie de vos données dans le fichier LibreOffice que celle\-ci respecte bien le format attendu.
Pour vérifier si le format correspond toutes les informations sont rappelées avec les \fI\%Détails et structure de la base de données SAFEM_DATA\fP\&.
.UNINDENT
.UNINDENT
.SS Importation des données
.sp
Le programme offre aussi la possibilité d’ajouter de nouveaux enregistrements directement à partir d’un fichier de données
\fBLibreOffice Calc\fP déjà rempli auparavant. Dans l’interface \fBMENU PRINCIPAL\fP choisissez l’option
\fB2 \- Ajouter à partir d\(aqun fichier déjà remplit\fP, appuyez sur la touche \fB2\fP et validez avec la touche \fBEntrée\fP\&.
Comme pour une saisie direct de données vous devrez ensuite spécifié le type de données que vous souhaitez ajouter.
Le programme vous affichera une notice quand au format que doit respecter votre tableau de données pour être ajouté sans encombre:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
===========================================================================
ATTENTION NOTICE
===========================================================================
Pour ajouter des données à partir d\(aqun fichier LibreOffice celui\-ci doit respecter certaines conditions :
\- La nom du fichier doit être de la forme : donnees_measurements_***.ods
\- Les colonnes doivent commencer à la premiere case de la première ligne et dans l\(aqordre :

loc_code | mdate | mtype | mvalue | munit | comment

\- La feuille de calcul sur laquelle sont notés les données doit s\(aqappeler Feuille1
===========================================================================
Appuyez sur Entrée une fois avoir pris connaissance de la notice.
.EE
.UNINDENT
.UNINDENT
.sp
Cela permet de s’assurer que les données saisies auront le même format que celui attendu par les \fBTABLE\fP de la database. Cette
notice est quelque peu différent selon le type d’enregistrements que vous voulez ajouter.
.sp
Après avoir pris connaissance de la notice appuyez sur la touche \fBEntrée\fP et le programme vous indique que votre fichier
doit se trouver dans le dossier \fBDATA\fP reservé à cet effet pour que le reste de la procédure fonctionne. Après vous avoir assurer
du bon emplacement de votre fichier appuyez une seconde fois sur \fBEntrée\fP\&.
.sp
Le programme va alors vous afficher une liste numérotée des différents fichiers présent dans le dossier \fBDATA\fP correspondant au type de données
que vous avez selectionné. Renseignez le numéro de le liste correspondant au fichier contenant les enregistrements que vous souhaitez ajouter et validé
avec la touche \fBEntrée\fP\&. Le fichier selectionné va être scanné et le nombre d’enregistrements contenus vous sera affiché pour éviter d’éventuelles
confusion. Dans une dernière étape cet à vous de valider si vous souhaitez ou non ajouter ces nouvelles données à la database. Répondre par \fBO\fP,
\fBo\fP, \fBY\fP ou \fBy\fP mettra à jour la base de données tandis que les réponses \fBN\fP ou \fBn\fP annuleront l’opération en cours. Si les données ont bien été
ajoutées dans le \fBTABLE\fP de \fBSAFEM_DATA\fP correspondant le programme vous le spécifiera avant de vous afficher à nouveau le \fBMENU CHOIX DES DONNEES\fP:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
A présent vous pouvez déposer le fichier LibreOffice (.ods) dans le dossier DATA, Appuyer sur Entrée une fois le fichier déposé

Fichiers disponibles:
0 \- donnees_measurements_2025\-06\-13.ods
1 \- donnees_measurements_2025\-06\-11.ods
2 \- donnees_measurements_2025\-06\-12.ods

Choisissez votre fichier en entrant son numéro d\(aqordre:

\-> 1

Lecture du fichier donnees_measurements_2025\-06\-11.ods
3 enregistrements trouvés dans le fichier.
Voulez\-vous insérer 3 enregistrements dans la base de données? (O/N):

\-> O

Enregistrement terminé

===========================================================================
MENU CHOIX DES DONNEES
===========================================================================
Quelles données voulez\-vous ajouter :
1 \- Localisation de puits/sources/rivières ?
2 \- Mesures physico\-chimiques/piézométriques ?
3 \- Quitter le menu choix des données et retourner au menu principal
===========================================================================
.EE
.UNINDENT
.UNINDENT
.sp
Il est maintenant possible si vous le souhaitez de \fI\%Visualiser et modifier des enregistrements\fP même plus anciens contenus dans la database \fBSAFEM_DATA\fP\&.
.SH VISUALISER ET MODIFIER DES ENREGISTREMENTS
.sp
En dernier lieu ce programme vous permet d’accéder aux enregistrements contenus dans la base de données et si vous le souhaitez
de les modifier. Dans le \fBMENU PRINCIPAL\fP selectionnez l’option \fB3 \- Visualiser/Modifier d\(aqanciennes données\fP\&. Une fois n’est
pas coutume vous devez ensuite spécifier le type de données auquel vous désirez accéder . Cela permet au programme de savoir dans quel
\fBTABLE\fP de \fBSAFEM_DATA\fP chercher.
.sp
Dans le menu \fBSELECTION DES DONNEES\fP qui s’affiche ensuite vous devez choisir la façon dont vous souhaitez accéder à vos données.
La base de données \fBSAFEM_DATA\fP contenant de nombreux enregistrements une premièr recoupement est nécessaire. Vous avez le choix entre utilisez
le code de nomenclature (cf. \fI\%Détails et structure de la base de données SAFEM_DATA\fP) ou bien la date de la prise de mesure ou de l’enregistrement de la localisation du puit.
.sp
Selectionnez le mode de recherche puis renseignez votre code ou votre date. Le programme va alors vous dressez la liste de tout les enregistrement qui
correspondent à l’indice de recherche que vous avez rentré:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
===========================================================================
SELECTION DES DONNEES
===========================================================================
Comment voulez\-vous accéder à vos données :
1 \- En saisissant le code de localisation (nomenclature)
2 \- En saisissant la date de la prise de la mesure
3 \- Retour au menu principal
===========================================================================

\-> 2

Saisissez la date (format YYYY\-MM\-DD) :

\-> 2025\-06\-12

Enregistrements trouvés (4):
rec loc_code      mdate mtype  mvalue  comment
1397     L003 2025\-06\-12   Orp   256.0  modifie
1398     L003 2025\-06\-12   Orp   165.0 modifié4
1399     L003 2025\-06\-12   Orp   255.0     None
1407     IPGP 2025\-06\-12 piezo   135.0    chaud
Entrez le numéro \(aqrec\(aq de l\(aqenregistrement à modifier/visualiser (0 pour annuler) :
.EE
.UNINDENT
.UNINDENT
.sp
\fBNOTE:\fP
.INDENT 0.0
.INDENT 3.5
Dans le cas où vous recherchez des enregistrement de localisation avec le code de nomenclature il est tout à fait normal de n’obtenir qu’un seul
enregistrement correspondant puis cette clef de recherche est unique et propre à chaque puit recenscé.
.UNINDENT
.UNINDENT
.sp
Il vous est donc possible de visualiser n’importe quelles données de la database pour peu que vous connaissiez la nomenclature ou la date de la prise de données
de l’enregistrement recherché. Il vous est, dans la suite du programme, aussi possible de modifié un enregistrement spécifique.
Le programme vous demande alors de renseignez le code d’enregistrement \fBrec\fP (dans le cas de données de mesures) ou le code de nomenclature \fBloc_code\fP
(dans le cas de données de localisation) qui correspond à la ligne de l’enregistrement que vous souhaitez modifier. Si vous ne souhaitez pas modifier de données saisissez
la touche \fB0\fP pour revenir au \fBMENU PRINCIPAL\fP\&.
.sp
Une fois votre réponse validée un fichier LibreOffice
s’ouvre contenant la ligne que vous pouvez dès à présent modifier. N’oubliez d’enregistrer vos modifications avec \fBCTRL + S\fP\&. Une fois terminé refermez le fichier, retournez
sur le programme et appuyez sur \fBEntrée\fP pour mettre à jour la database.
.sp
Le programme vous annonce la bonne modification de la base de données et vous redirige ensuite sur le \fBMENU PRINCIPAL\fP pour poursuivre votre travail:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
Entrez le numéro \(aqrec\(aq de l\(aqenregistrement à modifier/visualiser (0 pour annuler) :

\-> 1398

Fichier modify_measurements.ods généré pour modification.
Appuyez sur Entrée après avoir enregistré vos modifications
Enregistrement rec=1398 mis à jour avec succès!

===========================================================================
MENU PRINCIPAL
===========================================================================
Que souhaitez\-vous faire ?
1 \- Ajouter de nouvelles données
2 \- Ajouter à partir d\(aqun fichier déjà remplit
3 \- Visualiser/Modifier d\(aqanciennes données
4 \- Quitter
===========================================================================
?
.EE
.UNINDENT
.UNINDENT
.SH DOCUMENTATION DES FONCTIONS
.INDENT 0.0
.TP
.B lib_sql.add_from_DATA(connection, cursor, data_type)
Ajoute des enregistrements à la base de données depuis un fichier LibreOffice déjà remplit.
.INDENT 7.0
.TP
.B Paramètres
.INDENT 7.0
.IP \(bu 2
\fBconnection\fP – Objet de connexion à la base de données MySQL/MariaDB.
.IP \(bu 2
\fBcursor\fP – Objet curseur permettant d’exécuter des requêtes SQL.
.IP \(bu 2
\fBdata_type\fP (\fIstr\fP) – “localisation” ou “measurements” en fonction du TABLE ou l’on souhaite
ajouter les enregistrements
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B lib_sql.connect_database()
Etablie la connexion avec la base de données.
.INDENT 7.0
.TP
.B Paramètres
.INDENT 7.0
.IP \(bu 2
\fBuser\fP (\fIstr\fP) – Le nom d’utilisateur utilisé pour s’authentifier auprès du serveur MySQL.
.IP \(bu 2
\fBpasswd\fP (\fIstr\fP) – Le mot de passe permettant d’authentifier l’utilisateur auprès du serveur MySQL.
.IP \(bu 2
\fBdb\fP (\fIstr\fP) – Le nom de la base de données à utiliser lors de la connexion au serveur MySQL.
.IP \(bu 2
\fBhost\fP (\fIstr\fP) – Le nom d’hôte ou l’adresse IP du serveur MySQL. Par défaut : 127.0.0.1 ou localhost
.IP \(bu 2
\fBdéfaut.\fP (\fILes paramètres sont ici déjà remplis par\fP)
.UNINDENT
.TP
.B Renvoie
.INDENT 7.0
.IP \(bu 2
\fIconnection\fP – Objet de connexion à la base de données MySQL/MariaDB.
.IP \(bu 2
\fIcursor\fP – Objet curseur permettant d’exécuter des requêtes SQL.
.UNINDENT

.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B lib_sql.insert_data_localisation(connection, cursor, df)
Ajoute des enregistrements dans la base de données SAFE\-M dans le TABLE
localisation de manière intéractive.
.INDENT 7.0
.TP
.B Paramètres
.INDENT 7.0
.IP \(bu 2
\fBconnection\fP – Objet de connexion à la base de données MySQL/MariaDB.
.IP \(bu 2
\fBcursor\fP – Objet curseur permettant d’exécuter des requêtes SQL.
.IP \(bu 2
\fBdf\fP (\fIDataframe pandas\fP) – Dataframe regroupant les données du fichier LibreOffice «\ template_localisation.ods\ »
remplit par l’utilisateur pour ajouter les données de localisation de puits/sources/rivières.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B lib_sql.insert_data_measurements(connection, cursor, df)
Ajoute des enregistrements dans la base de données SAFE\-M dans le TABLE
measurements de manière intéractive.
.INDENT 7.0
.TP
.B Paramètres
.INDENT 7.0
.IP \(bu 2
\fBconnection\fP – Objet de connexion à la base de données MySQL/MariaDB.
.IP \(bu 2
\fBcursor\fP – Objet curseur permettant d’exécuter des requêtes SQL.
.IP \(bu 2
\fBdf\fP (\fIDataframe pandas\fP) – Dataframe regroupant les données du fichier LibreOffice «\ template_measurements.ods\ »
remplit par l’utilisateur pour ajouter les données de mesures physico\-chimique/piezométriques.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B lib_sql.modify_database_records(connection, cursor, data_type, by_code, search_value)
Modifie des enregistrements dans la base de données de manière interactive.
.SS Parameters:
.INDENT 7.0
.TP
.B connection :
Objet de connexion à la base de données MySQL/MariaDB.
.TP
.B cursor :
Objet curseur permettant d’exécuter des requêtes SQL.
.TP
.B data_type (str)
“localisation” ou “measurements” en fonction du TABLE à modifier
.TP
.B by_code (booléen)
True pour accèder aux données par le loc_code, False pour accèder aux données par la date de la prise de mesure
.TP
.B search_value (str)
Numéro du loc_code ou la date qui permet de cibler les données à modifier
.UNINDENT
.UNINDENT
.SH AUTHOR
tgauthierbrouard
.SH COPYRIGHT
2025, tgauthierbrouard
.\" Generated by docutils manpage writer.
.
